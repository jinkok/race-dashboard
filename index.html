<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SMART RACING PRO - ÏòÅÍµ¨ Ï†ÄÏû• Î≤ÑÏ†Ñ</title>
    
    <!-- 1. ÌïÑÏàò ÎùºÏù¥Î∏åÎü¨Î¶¨ (CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide-react@0.294.0/dist/umd/lucide-react.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;600;800&display=swap');
        body { font-family: 'Pretendard', sans-serif; background-color: #f8fafc; color: #1e293b; }
        .h-1 { @apply bg-white text-gray-900 border-2 border-gray-300; }
        .h-2 { @apply bg-yellow-400 text-gray-900 border-none; }
        .h-3 { @apply bg-red-600 text-white border-none; }
        .h-4 { @apply bg-gray-900 text-white border-none; }
        .h-5 { @apply bg-blue-600 text-white border-none; }
        .h-6 { @apply bg-green-600 text-white border-none; }
        .h-7 { @apply bg-amber-800 text-white border-none; }
        .h-8 { @apply bg-pink-400 text-white border-none; }
        .h-9 { @apply bg-purple-600 text-white border-none; }
        .h-10 { @apply bg-sky-300 text-gray-900 border-none; }
        .h-11 { @apply bg-white text-green-700 border-4 border-green-600; }
        .h-12 { @apply bg-yellow-400 text-green-700 border-4 border-green-600; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .animate-up { animation: slideUp 0.3s ease-out forwards; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>
    <div id="root">
        <div style="display:flex; justify-content:center; align-items:center; height:100vh; flex-direction:column; color:#94a3b8;">
            <div style="font-weight:bold; font-size:1.2rem;">Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§ Ïó∞Í≤∞ Ï§ë...</div>
            <div style="font-size:0.8rem; margin-top:10px;">Ïû†ÏãúÎßå Í∏∞Îã§Î†§Ï£ºÏÑ∏Ïöî.</div>
        </div>
    </div>

    <!-- 2. Firebase SDK ÏÑ§Ï†ï -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { getFirestore, doc, setDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // ÏÇ¨Ïö©Ïûê Ï†úÍ≥µ Config Ï†ÅÏö©
        const firebaseConfig = {
            apiKey: "AIzaSyDVJRqmpFjR9g91AgQsJIV65_7BJ7yYEOU",
            authDomain: "race-app-3e41d.firebaseapp.com",
            projectId: "race-app-3e41d",
            storageBucket: "race-app-3e41d.firebasestorage.app",
            messagingSenderId: "232853669556",
            appId: "1:232853669556:web:f9e7c8ccfde227f50679e1",
            measurementId: "G-H6MB9KZ8M8"
        };

        try {
            const app = initializeApp(firebaseConfig);
            const auth = getAuth(app);
            const db = getFirestore(app);
            
            // Ï†ÑÏó≠ Í∞ùÏ≤¥Ïóê Ï†ÄÏû• (ReactÏóêÏÑú ÏÇ¨Ïö©)
            window.fb = { 
                auth, db, doc, setDoc, onSnapshot, signInAnonymously, onAuthStateChanged,
                isReady: true 
            };
            console.log("Firebase initialized successfully");
        } catch (e) {
            console.error("Firebase Init Failed:", e);
            window.fb = { isReady: false, error: e.message };
        }
    </script>

    <!-- 3. React Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖò -->
    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;
        const { Trophy, Calendar, Upload, Cloud, Save, MapPin, Clock, Info, ChevronDown, ChevronUp, Search, Zap, Star, Flame, FileText, AlertTriangle } = lucide;

        // --- ÌååÏÑú ÏóîÏßÑ ---
        const Parser = {
            entry: (text) => {
                if (!text) return [];
                const lines = text.split('\n');
                const races = [];
                let current = null;
                let isTable = false;
                lines.forEach(line => {
                    const t = line.trim();
                    if (!t) return;
                    if (t.includes('Ï†ú') && t.includes('Í≤ΩÏ£º') && (t.includes('ÏÑúÏö∏') || t.includes('Î∂ÄÏÇ∞') || t.includes('Î∂ÄÍ≤Ω'))) {
                        if (current) races.push(current);
                        const noMatch = t.match(/Ï†ú(\d+)Í≤ΩÏ£º/);
                        const distMatch = t.match(/(\d{3,4})M/i);
                        const timeMatch = t.match(/(\d{1,2}:\d{2})/);
                        current = { 
                            no: noMatch ? noMatch[1] : '?', 
                            distance: distMatch ? distMatch[1] : '', 
                            startTime: timeMatch ? timeMatch[1] : '', 
                            horses: [] 
                        };
                        isTable = false;
                        return;
                    }
                    if (t.startsWith('Î≤àÌò∏')) { isTable = true; return; }
                    if (current && isTable) {
                        const cols = t.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
                        if (cols.length > 5 && /^\d/.test(cols[0])) {
                            current.horses.push({
                                no: cols[0]?.replace(/[‚ñ≤*]/g, '').trim(),
                                name: cols[1]?.trim(),
                                origin: cols[2]?.trim(), sex: cols[3]?.trim(), age: cols[4]?.trim(),
                                rating: cols[5]?.trim(), weight: cols[6]?.replace('*','').trim(), weightDiff: cols[7]?.trim(),
                                jockey: cols[8]?.trim(), trainer: cols[9]?.trim(), trainingCount: cols[11]?.trim(),
                                cycle: cols[12]?.trim(), gear: cols[13]?.replace(/"/g, '').trim(),
                                father: cols[15]?.trim(), grade: cols[16]?.trim()
                            });
                        }
                    }
                });
                if (current) races.push(current);
                return races;
            },
            history: (text) => {
                if (!text) return [];
                const lines = text.split('\n');
                return lines.slice(1).map(line => {
                    const c = line.split(',');
                    if (c.length < 20) return null;
                    return {
                        horseName: c[6]?.trim(), date: c[12]?.trim(), dist: c[14]?.replace('M','').trim(),
                        rec: c[15]?.trim(), rank: c[16]?.trim(), s1f: c[23]?.trim(), g1f: c[25]?.trim()
                    };
                }).filter(Boolean);
            },
            expert: (text) => {
                if (!text) return { seoul: {}, busan: {} };
                const result = { seoul: {}, busan: {} };
                const chunks = text.split(/\*\*(ÏÑúÏö∏|Î∂ÄÏÇ∞|Î∂ÄÍ≤Ω)\s*(\d+)Í≤ΩÏ£º/);
                for (let i = 1; i < chunks.length; i += 3) {
                    const locStr = chunks[i];
                    const loc = (locStr === 'ÏÑúÏö∏') ? 'seoul' : 'busan';
                    const no = chunks[i+1];
                    const content = chunks[i+2] || '';
                    
                    const recMatch = content.match(/\*\*Ï∂îÏ≤ú.*?\*\*[:Ôºö]\s*(.+?)(?=\r?\n|$)/);
                    const recommended = [];
                    if (recMatch) {
                        const matches = recMatch[1].matchAll(/\((\d+)\)\s*([Í∞Ä-Ìû£A-Z]+)/g);
                        for (const m of matches) recommended.push({ no: m[1], name: m[2] });
                    }
                    const dark = (content.match(/\*\*Î≥µÎ≥ë.*?\*\*[:Ôºö]\s*([\d, ]+)/) || [])[1]?.split(',').map(s=>s.trim()).filter(Boolean) || [];
                    const lead = (content.match(/\*\*ÏÑ†Ìñâ.*?\*\*[:Ôºö]\s*([\d, ]+)/) || [])[1]?.split(',').map(s=>s.trim()).filter(Boolean) || [];
                    const horseComments = {};
                    const cMatch = content.matchAll(/\*\*\s*\((\d+)\)\s*([Í∞Ä-Ìû£A-Z\s()]+)\s*\*\*\s*ÏùÄ?(.+?)(?=\s*(?:\r?\n\r?\n|\*\*\(|\*\*Ï∂îÏ≤ú|\*\*Î≥µÎ≥ë|\*\*ÏÑ†Ìñâ|$))/gs);
                    for (const m of cMatch) horseComments[m[1]] = m[3].trim().replace(/\s+/g, ' ');
                    const summary = content.split('\n').find(l => l.trim() && !l.startsWith('**') && !l.includes('Îì±Í∏â')) || "";
                    result[loc][no] = { recommended, dark, lead, horseComments, summary };
                }
                return result;
            }
        };

        const getBadgeStyle = (no) => {
            const n = parseInt(no);
            if (n===1) return "h-1"; if (n===2) return "h-2"; if (n===3) return "h-3";
            if (n===4) return "h-4"; if (n===5) return "h-5"; if (n===6) return "h-6";
            if (n===7) return "h-7"; if (n===8) return "h-8"; if (n===9) return "h-9";
            if (n===10) return "h-10"; if (n===11) return "h-11"; if (n===12) return "h-12";
            return "bg-gray-200 text-gray-500";
        };

        function App() {
            const [user, setUser] = useState(null);
            const [status, setStatus] = useState('connecting');
            const [view, setView] = useState('view');
            const [loc, setLoc] = useState('seoul');
            const [date, setDate] = useState('2025-12-28');
            const [raceIdx, setRaceIdx] = useState(0);
            const [expanded, setExpanded] = useState(null);
            const [dbData, setDbData] = useState({ seoul: { races: [], histories: [], analysis: { races: {} }, expert: {} }, busan: { races: [], histories: [], analysis: { races: {} }, expert: {} } });

            // Firebase Logic
            useEffect(() => {
                const checkFb = setInterval(() => {
                    if (window.fb && window.fb.isReady) {
                        clearInterval(checkFb);
                        initializeFirebase();
                    } else if (window.fb && window.fb.error) {
                        clearInterval(checkFb);
                        setStatus('error');
                        alert("Firebase Ïò§Î•ò: " + window.fb.error);
                    }
                }, 100);
                return () => clearInterval(checkFb);
            }, [date]);

            const initializeFirebase = async () => {
                const { auth, db, doc, onSnapshot, signInAnonymously, onAuthStateChanged } = window.fb;
                try {
                    await signInAnonymously(auth);
                    onAuthStateChanged(auth, (u) => {
                        setUser(u);
                        if (u) {
                            // ÎÇ†ÏßúÎ≥Ñ Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû•ÏÜå (YYYY-MM-DD Î¨∏ÏÑú)
                            const docRef = doc(db, 'artifacts', 'race-app-3e41d', 'public', 'data', 'dailyRacing', date);
                            onSnapshot(docRef, (snap) => {
                                if (snap.exists()) {
                                    setDbData(snap.data());
                                    setStatus('synced');
                                } else {
                                    // Îç∞Ïù¥ÌÑ∞ ÏóÜÏùå -> Îπà ÏÉÅÌÉúÎ°ú ÏãúÏûë
                                    setDbData({ seoul: { races: [], histories: [], analysis: { races: {} }, expert: {} }, busan: { races: [], histories: [], analysis: { races: {} }, expert: {} } });
                                    setStatus('ready');
                                }
                            });
                        }
                    });
                } catch (e) {
                    console.error(e);
                    setStatus('error');
                }
            };

            const saveToCloud = async () => {
                if (!user) return alert("Î°úÍ∑∏Ïù∏ ÌïÑÏöî");
                const { db, doc, setDoc } = window.fb;
                setStatus('saving');
                try {
                    // ÏÑ†ÌÉùÌïú ÎÇ†Ïßú Î¨∏ÏÑúÏóê Ï†ÑÏ≤¥ Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû•
                    const docRef = doc(db, 'artifacts', 'race-app-3e41d', 'public', 'data', 'dailyRacing', date);
                    await setDoc(docRef, { ...dbData, lastUpdated: new Date().toISOString() });
                    setStatus('synced');
                    alert("‚úÖ Ï†ÄÏû• ÏôÑÎ£å! Ïù¥Ï†ú ÏÉàÎ°úÍ≥†Ïπ®Ìï¥ÎèÑ Îç∞Ïù¥ÌÑ∞Í∞Ä Ïú†ÏßÄÎê©ÎãàÎã§.");
                } catch (e) {
                    alert("Ï†ÄÏû• Ïã§Ìå®: " + e.message);
                    setStatus('error');
                }
            };

            const handleFileUpload = (e, type, targetLoc) => {
                const file = e.target.files[0];
                if (!file) return;
                const reader = new FileReader();
                reader.onload = (ev) => {
                    const text = ev.target.result;
                    setDbData(prev => {
                        const next = JSON.parse(JSON.stringify(prev));
                        if (type === 'entry') next[targetLoc].races = Parser.entry(text);
                        if (type === 'history') next[targetLoc].histories = Parser.history(text);
                        if (type === 'analysis') next[targetLoc].analysis = JSON.parse(text);
                        if (type === 'expert') {
                            const p = Parser.expert(text);
                            next.seoul.expert = p.seoul;
                            next.busan.expert = p.busan;
                        }
                        return next;
                    });
                    setStatus('modified');
                };
                reader.readAsText(file, 'UTF-8');
            };

            const current = dbData[loc];
            const race = current?.races[raceIdx];
            const expertInfo = current?.expert?.[race?.no];
            const analysisInfo = current?.analysis?.races?.[race?.no];

            return (
                <div className="max-w-2xl mx-auto min-h-screen flex flex-col bg-slate-50 relative font-sans shadow-2xl">
                    {/* Header */}
                    <header className="bg-slate-900 text-white p-5 sticky top-0 z-50 shadow-lg">
                        <div className="flex justify-between items-center mb-4">
                            <div className="flex items-center gap-2">
                                <Trophy className="text-yellow-400" size={24}/>
                                <h1 className="text-xl font-black italic tracking-tighter">SMART RACING</h1>
                            </div>
                            <div className="flex gap-2">
                                <button onClick={() => setView('view')} className={`px-4 py-2 rounded-xl text-xs font-bold transition ${view === 'view' ? 'bg-white text-slate-900' : 'text-slate-400 bg-slate-800'}`}>Í≤ΩÎßàÏßÄ</button>
                                <button onClick={() => setView('admin')} className={`px-4 py-2 rounded-xl text-xs font-bold transition ${view === 'admin' ? 'bg-indigo-600 text-white' : 'text-slate-400 bg-slate-800'}`}>Í¥ÄÎ¶¨</button>
                            </div>
                        </div>
                        <div className="flex gap-2 items-center bg-slate-800 p-2 rounded-xl">
                            <Calendar size={16} className="text-slate-400 ml-2"/>
                            <input type="date" value={date} onChange={(e) => setDate(e.target.value)} className="bg-transparent text-sm font-bold text-white outline-none w-32"/>
                            <div className="h-4 w-px bg-slate-600 mx-1"></div>
                            <div className="flex-1 flex gap-1">
                                <button onClick={() => setLoc('seoul')} className={`flex-1 py-1.5 rounded-lg text-xs font-bold ${loc === 'seoul' ? 'bg-slate-100 text-slate-900' : 'text-slate-500'}`}>ÏÑúÏö∏</button>
                                <button onClick={() => setLoc('busan')} className={`flex-1 py-1.5 rounded-lg text-xs font-bold ${loc === 'busan' ? 'bg-blue-600 text-white' : 'text-slate-500'}`}>Î∂ÄÏÇ∞</button>
                            </div>
                        </div>
                        <div className="text-[10px] text-center mt-2 text-slate-500 font-bold uppercase tracking-widest flex justify-center items-center gap-2">
                            <Cloud size={10}/> STATUS: {status.toUpperCase()}
                        </div>
                    </header>

                    <main className="flex-1 p-4 overflow-y-auto pb-20">
                        {view === 'admin' ? (
                            <div className="space-y-4 animate-up">
                                <div className="bg-white p-5 rounded-2xl shadow-sm border border-slate-200">
                                    <div className="flex justify-between items-center mb-4">
                                        <h3 className="font-black text-lg flex items-center gap-2 text-slate-800"><Upload size={18} className="text-indigo-600"/> Îç∞Ïù¥ÌÑ∞ ÏóÖÎ°úÎìú</h3>
                                        {status === 'modified' && (
                                            <button onClick={saveToCloud} className="bg-orange-600 text-white px-4 py-2 rounded-xl text-xs font-bold shadow-lg flex items-center gap-2 animate-bounce">
                                                <Save size={14}/> ÏÑúÎ≤Ñ Ï†ÄÏû•
                                            </button>
                                        )}
                                    </div>
                                    <div className="grid grid-cols-1 gap-3">
                                        {['entry', 'history', 'analysis', 'expert'].map((type, idx) => (
                                            <div key={type} className="p-3 bg-slate-50 rounded-xl border border-slate-200">
                                                <label className="text-xs font-bold text-slate-500 block mb-1">{idx+1}. {type.toUpperCase()} File</label>
                                                <input type="file" onChange={e => handleFileUpload(e, type, loc)} className="text-xs w-full"/>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>
                        ) : (
                            <div className="space-y-4">
                                <div className="flex overflow-x-auto gap-2 pb-2 scrollbar-hide">
                                    {current?.races.length > 0 ? current.races.map((r, i) => (
                                        <button key={i} onClick={() => {setRaceIdx(i); setExpanded(null);}} className={`flex-shrink-0 w-12 h-12 rounded-xl font-black text-lg transition-all shadow-sm border ${raceIdx === i ? 'bg-slate-900 text-white border-slate-900 scale-105' : 'bg-white text-slate-300 border-slate-100'}`}>
                                            {r.no}
                                        </button>
                                    )) : <div className="w-full py-10 text-center text-slate-400 font-bold text-xs border-2 border-dashed rounded-3xl">Îç∞Ïù¥ÌÑ∞ ÏóÜÏùå</div>}
                                </div>

                                {race && (
                                    <div className="space-y-4 animate-up">
                                        <div className="bg-white p-5 rounded-3xl shadow-sm border-l-8 border-yellow-400 relative overflow-hidden">
                                            <div className="flex justify-between items-start relative z-10">
                                                <div>
                                                    <h2 className="text-2xl font-black text-slate-900 italic tracking-tighter">Ï†ú {race.no} Í≤ΩÏ£º</h2>
                                                    <div className="flex items-center gap-2 text-xs font-bold text-slate-400 mt-2">
                                                        <Clock size={14}/> {race.startTime}
                                                        <span className="w-1 h-1 bg-slate-300 rounded-full"/>
                                                        <span className="text-indigo-600 font-black">{race.distance}M</span>
                                                    </div>
                                                </div>
                                                {analysisInfo?.avgRecord && (
                                                    <div className="text-right">
                                                        <span className="text-[10px] font-bold text-slate-400 uppercase">Avg Rec</span>
                                                        <div className="text-xl font-black text-slate-800 font-mono tracking-tight">{analysisInfo.avgRecord}</div>
                                                    </div>
                                                )}
                                            </div>
                                            
                                            {expertInfo && (
                                                <div className="mt-4 p-3 bg-orange-50 rounded-xl border border-orange-100 relative">
                                                    <div className="flex flex-wrap gap-2 items-center mb-2">
                                                        <span className="bg-orange-600 text-white text-[9px] px-2 py-0.5 rounded-full font-black uppercase flex items-center gap-1"><Star size={10} fill="white"/> Ï∂îÏ≤ú</span>
                                                        <div className="flex gap-1 ml-auto">
                                                            {expertInfo.recommended?.map(h => (
                                                                <span key={h.no} className="w-6 h-6 rounded-full bg-white text-orange-600 border border-orange-200 flex items-center justify-center text-xs font-black shadow-sm">{h.no}</span>
                                                            ))}
                                                        </div>
                                                    </div>
                                                    <p className="text-[11px] text-orange-900 font-medium leading-relaxed">
                                                        {expertInfo.summary ? expertInfo.summary.substring(0, 80) + "..." : "Ï†ÑÎ¨∏Í∞Ä ÏÉÅÏÑ∏ Î∂ÑÏÑù Ï∞∏Ï°∞"}
                                                    </p>
                                                    <div className="mt-2 pt-2 border-t border-orange-100 flex gap-3 text-[10px] font-bold">
                                                        {expertInfo.dark.length > 0 && <span className="text-purple-600">‚ö° Î≥µÎ≥ë: {expertInfo.dark.join(', ')}</span>}
                                                        {expertInfo.lead.length > 0 && <span className="text-red-600">üî• ÏÑ†Ìñâ: {expertInfo.lead.join(', ')}</span>}
                                                    </div>
                                                </div>
                                            )}
                                        </div>

                                        <div className="flex flex-col gap-3 pb-10">
                                            {race.horses.map((h) => {
                                                const isExp = expanded === h.no;
                                                const hist = current.histories.filter(v => v.horseName === h.name).slice(0, 5);
                                                const expComment = expertInfo?.horseComments?.[h.no];
                                                const isRec = expertInfo?.recommended?.some(r => r.no === h.no);
                                                const isDark = expertInfo?.dark?.includes(h.no);
                                                const isFastS = analysisInfo?.analysis?.fastStart.some(v => v.no === h.no);

                                                return (
                                                    <div key={h.no} className={`bg-white rounded-2xl shadow-sm border overflow-hidden transition-all ${isExp ? 'border-indigo-500 ring-1 ring-indigo-500' : 'border-slate-100'}`}>
                                                        <div className="p-3 flex items-center gap-3 cursor-pointer" onClick={() => setExpanded(isExp ? null : h.no)}>
                                                            <div className={`w-12 h-12 rounded-xl flex items-center justify-center shadow-inner font-black text-xl italic tracking-tighter ${getBadgeStyle(h.no)}`}>
                                                                {h.no}
                                                            </div>
                                                            <div className="flex-1 min-w-0">
                                                                <div className="flex items-center gap-2 mb-1">
                                                                    <h3 className="font-bold text-slate-800 truncate text-base">{h.name}</h3>
                                                                    <div className="flex gap-1">
                                                                        {isRec && <Star size={12} className="text-orange-400 fill-orange-400" />}
                                                                        {isDark && <Zap size={12} className="text-purple-600 fill-purple-600" />}
                                                                        {isFastS && <div className="w-1.5 h-1.5 rounded-full bg-red-500 animate-pulse"/>}
                                                                    </div>
                                                                </div>
                                                                <div className="text-[11px] text-slate-500 flex gap-2 font-bold uppercase">
                                                                    <span className="text-indigo-600">{h.jockey}</span>
                                                                    <span className="text-slate-300">|</span>
                                                                    <span>{h.weight}kg</span>
                                                                    <span className="text-slate-300">|</span>
                                                                    <span className="bg-slate-100 px-1.5 rounded text-slate-600">R{h.rating}</span>
                                                                </div>
                                                            </div>
                                                            <div className="text-right pr-1">
                                                                <div className="text-[9px] text-slate-400 font-bold uppercase">Train</div>
                                                                <div className="font-black text-slate-800">{h.trainingCount}</div>
                                                            </div>
                                                            <div className="text-slate-300">{isExp ? <ChevronUp size={20}/> : <ChevronDown size={20}/>}</div>
                                                        </div>

                                                        {isExp && (
                                                            <div className="bg-slate-50 border-t border-slate-100 p-4 animate-in">
                                                                {expComment && (
                                                                    <div className="mb-4 bg-white p-3 rounded-xl border-l-4 border-orange-400 shadow-sm">
                                                                        <div className="flex items-center gap-2 mb-1 text-orange-600 font-black text-[10px] uppercase tracking-wider">
                                                                            <Zap size={10}/> Expert Insight
                                                                        </div>
                                                                        <p className="text-xs font-medium text-slate-700 leading-relaxed">
                                                                            {expComment}
                                                                        </p>
                                                                    </div>
                                                                )}
                                                                <div className="grid grid-cols-2 gap-2 mb-4 text-xs text-slate-600">
                                                                    <div className="bg-white p-2 rounded-lg border border-slate-200">
                                                                        <div className="text-[10px] text-slate-400 font-bold mb-1">Ï°∞ÍµêÏÇ¨</div>
                                                                        <div className="font-bold">{h.trainer}</div>
                                                                    </div>
                                                                    <div className="bg-white p-2 rounded-lg border border-slate-200">
                                                                        <div className="text-[10px] text-slate-400 font-bold mb-1">Î∂ÄÎßà</div>
                                                                        <div className="font-bold truncate">{h.father}</div>
                                                                    </div>
                                                                    <div className="bg-white p-2 rounded-lg border border-slate-200">
                                                                        <div className="text-[10px] text-slate-400 font-bold mb-1">Ï∂úÏ†ÑÏ£ºÍ∏∞</div>
                                                                        <div className="font-bold text-indigo-600">{h.cycle}Ï£º</div>
                                                                    </div>
                                                                    <div className="bg-white p-2 rounded-lg border border-slate-200">
                                                                        <div className="text-[10px] text-slate-400 font-bold mb-1">Ïû•Íµ¨</div>
                                                                        <div className="font-bold truncate">{h.gear || '-'}</div>
                                                                    </div>
                                                                </div>
                                                                <div className="bg-slate-900 rounded-xl overflow-hidden shadow-inner">
                                                                    <table className="w-full text-[10px] text-center text-slate-400">
                                                                        <thead className="bg-slate-800 text-slate-500 font-bold uppercase">
                                                                            <tr><th className="py-2">ÎÇ†Ïßú</th><th>Í±∞Î¶¨</th><th className="text-white">Í∏∞Î°ù</th><th>ÏàúÏúÑ</th><th className="text-red-400">S1F</th><th className="text-blue-400">G1F</th></tr>
                                                                        </thead>
                                                                        <tbody className="divide-y divide-slate-800 font-mono">
                                                                            {hist.map((v, i) => (
                                                                                <tr key={i}>
                                                                                    <td className="py-2 text-slate-500">{v.date}</td>
                                                                                    <td>{v.dist}</td>
                                                                                    <td className="text-yellow-400">{v.rec}</td>
                                                                                    <td className={v.rank?.startsWith('1/') ? 'text-white font-bold' : ''}>{v.rank}</td>
                                                                                    <td className="text-red-500">{v.s1f}</td>
                                                                                    <td className="text-blue-500">{v.g1f}</td>
                                                                                </tr>
                                                                            ))}
                                                                            {hist.length === 0 && <tr><td colSpan="6" className="py-4 text-slate-600">Ï†ÑÏ†Å ÏóÜÏùå</td></tr>}
                                                                        </tbody>
                                                                    </table>
                                                                </div>
                                                            </div>
                                                        )}
                                                    </div>
                                                );
                                            })}
                                        </div>
                                    </div>
                                )}
                            </div>
                        )}
                    </main>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
