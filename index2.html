<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SMART RACING PRO - 통합 분석 시스템</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide-react@0.294.0/dist/umd/lucide-react.min.js"></script>

    <!-- Firebase SDKs -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, setDoc, onSnapshot, getDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "",
            authDomain: "race-app-3e41d.firebaseapp.com",
            projectId: "race-app-3e41d",
            storageBucket: "race-app-3e41d.firebasestorage.app",
            messagingSenderId: "232853669556",
            appId: "1:232853669556:web:f9e7c8ccfde227f50679e1"
        };
        const appId = 'racing-master-pro-v2';

        try {
            const app = initializeApp(firebaseConfig);
            const auth = getAuth(app);
            const db = getFirestore(app);
            window.FB_INSTANCE = { auth, db, appId, signInAnonymously, onAuthStateChanged, doc, setDoc, onSnapshot, getDoc };
        } catch (e) { console.error("Firebase Error:", e); }
    </script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;700;900&display=swap');
        body { font-family: 'Pretendard', sans-serif; background-color: #f8fafc; color: #1e293b; }
        .horse-no-1 { background: #ffffff; color: #1e293b; border: 2px solid #cbd5e1; }
        .horse-no-2 { background: #facc15; color: #000000; }
        .horse-no-3 { background: #ef4444; color: #ffffff; }
        .horse-no-4 { background: #1e293b; color: #ffffff; }
        .horse-no-5 { background: #3b82f6; color: #ffffff; }
        .horse-no-6 { background: #16a34a; color: #ffffff; }
        .horse-no-7 { background: #92400e; color: #ffffff; }
        .horse-no-8 { background: #f472b6; color: #ffffff; }
        .horse-no-9 { background: #9333ea; color: #ffffff; }
        .horse-no-10 { background: #7dd3fc; color: #0f172a; }
        .horse-no-11 { background: #ffffff; color: #16a34a; border: 4px solid #16a34a; }
        .horse-no-12 { background: #facc15; color: #16a34a; border: 4px solid #16a34a; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .glass-panel { background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.3); }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;
        
        const Icon = ({ name, size = 16, className = "" }) => {
            const lib = window.lucideReact || window.lucide;
            const TargetIcon = lib ? (lib[name] || lib[name.toLowerCase()]) : null;
            return TargetIcon ? <TargetIcon size={size} className={className} /> : null;
        };

        // --- 강력한 데이터 파싱 엔진 ---
        const Parser = {
            // 출전표 파싱
            entry: (text) => {
                const lines = text.split('\n');
                const races = [];
                let current = null;
                let isTable = false;
                lines.forEach(line => {
                    const t = line.trim();
                    if (!t) return;
                    if (t.includes('경주') && (t.includes('서울') || t.includes('부산') || t.includes('부경'))) {
                        if (current) races.push(current);
                        current = {
                            no: (t.match(/제(\d+)경주/) || [])[1] || '?',
                            startTime: t.split(',')[1]?.trim() || '',
                            distance: (t.match(/(\d{3,4})M/i) || [])[1],
                            conditions: '', horses: []
                        };
                        isTable = false;
                        return;
                    }
                    if (current && !current.conditions && !t.startsWith('번호')) {
                        current.conditions = t;
                        return;
                    }
                    if (t.startsWith('번호')) { isTable = true; return; }
                    if (current && isTable) {
                        const cols = t.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
                        if (cols.length > 10) {
                            current.horses.push({
                                no: cols[0]?.replace(/[▲*]/g, ''),
                                name: cols[1]?.trim(),
                                sex: cols[3], age: cols[4],
                                rating: cols[5]?.trim(),
                                weight: cols[6]?.replace('*', ''),
                                weightDiff: cols[7],
                                jockey: cols[8]?.trim(),
                                trainer: cols[9]?.trim(),
                                trainingCount: cols[11],
                                cycle: cols[12],
                                gear: cols[13]?.replace(/"/g, ''),
                                father: cols[15],
                                grade: cols[16]?.trim()
                            });
                        }
                    }
                });
                if (current) races.push(current);
                return races;
            },
            // 상세 전적 파싱
            history: (text) => {
                const lines = text.split('\n');
                return lines.slice(1).map(line => {
                    const c = line.split(',');
                    if (c.length < 25) return null;
                    return {
                        raceNo: c[1]?.replace(/[^0-9]/g, ''),
                        horseNo: c[5]?.trim(),
                        horseName: c[6]?.trim(),
                        date: c[12],
                        grade: c[13],
                        dist: c[14]?.replace('M',''),
                        rec: c[15],
                        rank: c[16],
                        jockey: c[21],
                        weight: c[22],
                        s1f: c[23],
                        g3f: c[24],
                        g1f: c[25],
                        bodyW: c[26]
                    };
                }).filter(Boolean);
            },
            // 전문가 분석 TXT 파싱
            expert: (text) => {
                const result = { seoul: {}, busan: {} };
                const sections = text.split(/\*\*(서울|부산|부경)\s*(\d+)경주/);
                for (let i = 1; i < sections.length; i += 3) {
                    const loc = (sections[i] === '서울') ? 'seoul' : 'busan';
                    const no = sections[i+1];
                    const content = sections[i+2] || '';
                    
                    const recMatch = content.match(/추천.*?[:：]\s*(.+?)(?=\s*\*\*|$)/s);
                    const recommended = [];
                    if (recMatch) {
                        const matches = recMatch[1].matchAll(/\((\d+)\)\s*([가-힣a-zA-Z.]+)/g);
                        for (const m of matches) recommended.push({ no: m[1], name: m[2] });
                    }

                    const horseComments = {};
                    const horsePattern = /\((\d+)\)\s*([가-힣A-Z\s]+)\*\*은?(.+?)(?=\s*\(\d+\)|$)/gs;
                    let m;
                    while ((m = horsePattern.exec(content)) !== null) {
                        horseComments[m[1]] = m[3].trim();
                    }

                    result[loc][no] = {
                        recommended,
                        darkHorse: (content.match(/복병.*?[:：]\s*([\d, ]+)/) || [])[1]?.split(',').map(s => s.trim()).filter(Boolean) || [],
                        leadHorse: (content.match(/선행.*?[:：]\s*([\d, ]+)/) || [])[1]?.split(',').map(s => s.trim()).filter(Boolean) || [],
                        comment: content.split('\n')[1] || '' // 첫 문단 요약
                    };
                }
                return result;
            }
        };

        function App() {
            const [user, setUser] = useState(null);
            const [syncStatus, setSyncStatus] = useState('connecting');
            const [view, setView] = useState('view');
            const [activeLoc, setActiveLoc] = useState('seoul');
            const [selectedDate, setSelectedDate] = useState(new Date().toISOString().split('T')[0]);
            const [raceIdx, setRaceIdx] = useState(0);
            const [expanded, setExpanded] = useState(null);

            const [dbData, setDbData] = useState({
                seoul: { races: [], histories: [], analysis: { races: {} }, expert: {} },
                busan: { races: [], histories: [], analysis: { races: {} }, expert: {} }
            });

            // --- Firebase 실시간 동기화 ---
            useEffect(() => {
                if (!window.FB_INSTANCE) return;
                const { auth, db, appId, signInAnonymously, onAuthStateChanged, onSnapshot, doc } = window.FB_INSTANCE;
                
                signInAnonymously(auth);
                onAuthStateChanged(auth, (u) => {
                    setUser(u);
                    if (u) {
                        const docRef = doc(db, 'artifacts', appId, 'public', 'data', 'dailyRacing', selectedDate);
                        const unsub = onSnapshot(docRef, (snap) => {
                            if (snap.exists()) {
                                setDbData(snap.data());
                                setSyncStatus('synced');
                            } else {
                                setDbData({
                                    seoul: { races: [], histories: [], analysis: { races: {} }, expert: {} },
                                    busan: { races: [], histories: [], analysis: { races: {} }, expert: {} }
                                });
                                setSyncStatus('empty');
                            }
                        });
                        return () => unsub();
                    }
                });
            }, [selectedDate]);

            const saveToCloud = async () => {
                if (!user || !window.FB_INSTANCE) return;
                setSyncStatus('syncing');
                const { db, appId, setDoc, doc } = window.FB_INSTANCE;
                try {
                    await setDoc(doc(db, 'artifacts', appId, 'public', 'data', 'dailyRacing', selectedDate), dbData);
                    setSyncStatus('synced');
                    alert(`✅ ${selectedDate} 데이터가 클라우드에 안전하게 저장되었습니다.`);
                } catch (e) { alert(e.message); setSyncStatus('error'); }
            };

            const handleFileUpload = (e, type, loc) => {
                const file = e.target.files[0];
                if (!file) return;
                const reader = new FileReader();
                reader.onload = (ev) => {
                    const text = ev.target.result;
                    setDbData(prev => {
                        const next = { ...prev };
                        if (type === 'entry') next[loc].races = Parser.entry(text);
                        if (type === 'history') next[loc].histories = Parser.history(text);
                        if (type === 'analysis') next[loc].analysis = JSON.parse(text);
                        if (type === 'expert') {
                            const parsed = Parser.expert(text);
                            next.seoul.expert = parsed.seoul;
                            next.busan.expert = parsed.busan;
                        }
                        return next;
                    });
                    setSyncStatus('modified');
                };
                reader.readAsText(file, 'UTF-8');
            };

            const current = dbData[activeLoc];
            const race = current.races[raceIdx];
            const expertInfo = current.expert[race?.no];
            const analysisInfo = current.analysis?.races?.[race?.no];

            return (
                <div className="max-w-2xl mx-auto min-h-screen flex flex-col pb-20">
                    {/* Header */}
                    <header className="bg-slate-900 text-white p-5 sticky top-0 z-50 shadow-2xl">
                        <div className="flex justify-between items-center mb-5">
                            <div className="flex items-center gap-3">
                                <div className="p-2 bg-gradient-to-br from-yellow-300 to-yellow-500 rounded-xl text-slate-900 shadow-lg shadow-yellow-500/20">
                                    <Icon name="Rocket" size={24} />
                                </div>
                                <div>
                                    <h1 className="text-xl font-black tracking-tight leading-none uppercase">Smart Racing <span className="text-yellow-400">Pro</span></h1>
                                    <p className="text-[10px] text-slate-400 font-bold uppercase mt-1 tracking-widest flex items-center gap-1">
                                        <Icon name="Database" size={8}/> {syncStatus} | Cloud Sync Active
                                    </p>
                                </div>
                            </div>
                            <div className="flex gap-2">
                                <button onClick={() => setView('view')} className={`px-4 py-2 rounded-xl text-xs font-black transition-all ${view === 'view' ? 'bg-white text-slate-900 shadow-lg' : 'text-slate-500 hover:text-white'}`}>VIEW</button>
                                <button onClick={() => setView('admin')} className={`px-4 py-2 rounded-xl text-xs font-black transition-all ${view === 'admin' ? 'bg-indigo-600 text-white shadow-lg shadow-indigo-500/30' : 'text-slate-500 hover:text-white'}`}>ADMIN</button>
                            </div>
                        </div>

                        <div className="flex items-center gap-3 bg-slate-800/50 p-1.5 rounded-2xl">
                            <input type="date" value={selectedDate} onChange={(e) => setSelectedDate(e.target.value)} className="bg-transparent text-xs font-black px-3 py-1 focus:outline-none flex-1"/>
                            <div className="h-4 w-px bg-slate-700"/>
                            <div className="flex gap-1">
                                <button onClick={() => setActiveLoc('seoul')} className={`px-4 py-1.5 rounded-xl text-[10px] font-black transition-all ${activeLoc === 'seoul' ? 'bg-slate-100 text-slate-900 shadow-sm' : 'text-slate-500'}`}>서울</button>
                                <button onClick={() => setActiveLoc('busan')} className={`px-4 py-1.5 rounded-xl text-[10px] font-black transition-all ${activeLoc === 'busan' ? 'bg-blue-600 text-white shadow-sm shadow-blue-500/20' : 'text-slate-500'}`}>부산</button>
                            </div>
                        </div>
                    </header>

                    <main className="flex-1 p-4 overflow-y-auto">
                        {view === 'admin' ? (
                            <section className="space-y-4 animate-in">
                                <div className="bg-white p-6 rounded-[2.5rem] border border-slate-100 shadow-sm">
                                    <h3 className="text-lg font-black mb-6 flex items-center gap-2"><Icon name="FileUp" className="text-indigo-600"/> {selectedDate} 데이터 통합 업로드</h3>
                                    
                                    <div className="space-y-6">
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                            <div className="p-4 bg-slate-50 rounded-2xl border border-slate-200">
                                                <label className="text-[10px] font-black text-slate-400 uppercase mb-3 block">출전표 (CSV)</label>
                                                <input type="file" onChange={e => handleFileUpload(e, 'entry', activeLoc)} className="w-full text-xs file:bg-white file:border-slate-200 file:rounded-lg file:px-3 file:py-1"/>
                                            </div>
                                            <div className="p-4 bg-slate-50 rounded-2xl border border-slate-200">
                                                <label className="text-[10px] font-black text-slate-400 uppercase mb-3 block">상세 전적 (CSV)</label>
                                                <input type="file" onChange={e => handleFileUpload(e, 'history', activeLoc)} className="w-full text-xs file:bg-white file:border-slate-200 file:rounded-lg file:px-3 file:py-1"/>
                                            </div>
                                            <div className="p-4 bg-slate-50 rounded-2xl border border-slate-200">
                                                <label className="text-[10px] font-black text-slate-400 uppercase mb-3 block">AI 분석 (JSON)</label>
                                                <input type="file" onChange={e => handleFileUpload(e, 'analysis', activeLoc)} className="w-full text-xs file:bg-white file:border-slate-200 file:rounded-lg file:px-3 file:py-1"/>
                                            </div>
                                            <div className="p-4 bg-slate-50 rounded-2xl border border-slate-200">
                                                <label className="text-[10px] font-black text-slate-400 uppercase mb-3 block">전문가 코멘트 (TXT)</label>
                                                <input type="file" onChange={e => handleFileUpload(e, 'expert', 'both')} className="w-full text-xs file:bg-white file:border-slate-200 file:rounded-lg file:px-3 file:py-1"/>
                                            </div>
                                        </div>

                                        <button onClick={saveToCloud} className="w-full bg-slate-900 text-white py-5 rounded-3xl font-black text-base shadow-2xl hover:bg-slate-800 transition-all flex items-center justify-center gap-3 active:scale-95">
                                            <Icon name="CloudUpload" size={20}/> 모든 데이터 서버에 저장하기
                                        </button>
                                    </div>
                                </div>
                            </section>
                        ) : (
                            <section className="space-y-5 animate-in">
                                {/* Race Navigation */}
                                <div className="flex overflow-x-auto gap-2.5 pb-2 scrollbar-hide">
                                    {current.races.map((r, i) => (
                                        <button key={i} onClick={() => {setRaceIdx(i); setExpanded(null);}} className={`flex-shrink-0 w-12 h-12 rounded-[1.25rem] font-black text-sm transition-all shadow-sm ${raceIdx === i ? 'bg-slate-900 text-white scale-110 shadow-lg' : 'bg-white text-slate-400 hover:border-slate-200 border border-white'}`}>{r.no}</button>
                                    ))}
                                </div>

                                {race ? (
                                    <div className="space-y-5">
                                        {/* Race Summary Card */}
                                        <div className="bg-white p-6 rounded-[2.5rem] shadow-sm border-l-[10px] border-yellow-400 relative overflow-hidden">
                                            <div className="relative z-10 flex justify-between items-start">
                                                <div>
                                                    <h2 className="text-3xl font-black italic tracking-tighter">제 {race.no} R</h2>
                                                    <div className="flex items-center gap-2 text-xs font-bold text-slate-400 mt-1">
                                                        <Icon name="Clock" size={14}/> {race.startTime}
                                                        <span className="w-1 h-1 bg-slate-200 rounded-full"/>
                                                        <span className="text-indigo-600 bg-indigo-50 px-2 rounded-md">{race.distance}M</span>
                                                    </div>
                                                </div>
                                                {analysisInfo?.avgRecord && (
                                                    <div className="text-right">
                                                        <span className="text-[10px] font-black text-slate-300 uppercase block mb-1 tracking-widest">Avg Winner Rec</span>
                                                        <div className="text-2xl font-black text-indigo-900 font-mono italic">{analysisInfo.avgRecord}</div>
                                                    </div>
                                                )}
                                            </div>

                                            {expertInfo && (
                                                <div className="mt-5 p-4 bg-orange-50 rounded-2xl border border-orange-100">
                                                    <div className="flex flex-wrap gap-2 items-center mb-2">
                                                        <span className="bg-orange-600 text-white text-[9px] px-2 py-0.5 rounded-full font-black uppercase">Expert Recommended</span>
                                                        <div className="flex gap-1">
                                                            {expertInfo.recommended.map(h => (
                                                                <span key={h.no} className="w-6 h-6 rounded-full bg-white text-orange-600 border border-orange-200 flex items-center justify-center text-[10px] font-black shadow-sm">{h.no}</span>
                                                            ))}
                                                        </div>
                                                    </div>
                                                    <p className="text-[11px] text-orange-900/70 font-bold leading-relaxed">{expertInfo.comment}</p>
                                                </div>
                                            )}
                                        </div>

                                        {/* Horse List */}
                                        <div className="grid grid-cols-1 gap-3">
                                            {race.horses.map((h) => {
                                                const isExp = expanded === h.no;
                                                const hist = current.histories.filter(v => v.horseName === h.name).slice(0, 8);
                                                const isFastStart = analysisInfo?.analysis?.fastStart.some(v => v.no === h.no);
                                                const isFastFinish = analysisInfo?.analysis?.fastFinish.some(v => v.no === h.no);
                                                const isDark = expertInfo?.darkHorse.includes(h.no);

                                                return (
                                                    <div key={h.no} className={`bg-white rounded-[2rem] border transition-all ${isExp ? 'ring-2 ring-slate-900 shadow-xl' : 'border-slate-100 hover:border-slate-300 shadow-sm'}`}>
                                                        <div className="p-4 flex items-center gap-4 cursor-pointer" onClick={() => setExpanded(isExp ? null : h.no)}>
                                                            <div className={`w-14 h-14 rounded-2xl flex items-center justify-center flex-shrink-0 shadow-inner horse-no-${h.no}`}>
                                                                <span className="text-2xl font-black italic">{h.no}</span>
                                                            </div>
                                                            <div className="flex-1 min-w-0">
                                                                <div className="flex items-center gap-2 mb-0.5">
                                                                    <h3 className="text-lg font-black text-slate-800 truncate">{h.name}</h3>
                                                                    <div className="flex gap-1">
                                                                        {isFastStart && <span className="w-2 h-2 bg-red-500 rounded-full animate-pulse"/>}
                                                                        {isFastFinish && <span className="w-2 h-2 bg-blue-500 rounded-full animate-pulse"/>}
                                                                        {isDark && <span className="w-2 h-2 bg-purple-500 rounded-full animate-pulse"/>}
                                                                    </div>
                                                                </div>
                                                                <div className="flex flex-wrap items-center gap-x-2 text-xs font-bold text-slate-400">
                                                                    <span className="text-indigo-600 flex items-center gap-1"><Icon name="User" size={12}/> {h.jockey}</span>
                                                                    <span className="text-slate-200">|</span>
                                                                    <span className="text-slate-600">{h.weight}kg ({h.weightDiff})</span>
                                                                    <span className="text-slate-200">|</span>
                                                                    <span className="bg-slate-100 px-2 rounded-lg">R{h.rating}</span>
                                                                </div>
                                                            </div>
                                                            <div className="text-right flex-shrink-0">
                                                                <div className="text-[9px] font-black text-slate-300 uppercase mb-1">Training</div>
                                                                <div className="text-sm font-black text-slate-700">{h.trainingCount}회 / {h.cycle}주</div>
                                                            </div>
                                                        </div>

                                                        {isExp && (
                                                            <div className="px-5 pb-5 pt-1 animate-in">
                                                                <div className="h-px bg-slate-100 mb-4"/>
                                                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                                                    <div className="bg-slate-50 p-4 rounded-2xl border border-slate-100">
                                                                        <h4 className="text-[10px] font-black text-slate-400 uppercase mb-3 flex items-center gap-1"><Icon name="Info" size={12}/> Horse Detail</h4>
                                                                        <div className="grid grid-cols-2 gap-y-2 text-xs font-bold">
                                                                            <span className="text-slate-400">성별/나이</span><span>{h.sex}/{h.age}세</span>
                                                                            <span className="text-slate-400">조교사</span><span>{h.trainer}</span>
                                                                            <span className="text-slate-400">부마</span><span className="truncate">{h.father}</span>
                                                                            <span className="text-slate-400">장구</span><span className="truncate">{h.gear || '-'}</span>
                                                                        </div>
                                                                    </div>
                                                                    <div className="bg-indigo-50/50 p-4 rounded-2xl border border-indigo-100">
                                                                        <h4 className="text-[10px] font-black text-indigo-400 uppercase mb-3 flex items-center gap-1"><Icon name="Zap" size={12}/> Analysis</h4>
                                                                        <div className="flex flex-wrap gap-2">
                                                                            {isFastStart && <span className="bg-red-600 text-white text-[9px] px-2 py-1 rounded-lg font-black uppercase">Fast Start</span>}
                                                                            {isFastFinish && <span className="bg-blue-600 text-white text-[9px] px-2 py-1 rounded-lg font-black uppercase">Fast Finish</span>}
                                                                            {isDark && <span className="bg-purple-600 text-white text-[9px] px-2 py-1 rounded-lg font-black uppercase">Dark Horse</span>}
                                                                        </div>
                                                                        <p className="text-[11px] text-slate-600 font-medium mt-3 leading-relaxed italic border-l-2 border-indigo-200 pl-3">
                                                                            {expertInfo?.comment || "No specific comment for this horse."}
                                                                        </p>
                                                                    </div>
                                                                </div>

                                                                <div className="bg-white rounded-2xl border border-slate-100 overflow-hidden overflow-x-auto shadow-inner">
                                                                    <table className="w-full text-[10px] whitespace-nowrap">
                                                                        <thead className="bg-slate-900 text-white">
                                                                            <tr>
                                                                                <th className="px-3 py-2">Date</th>
                                                                                <th className="px-3 py-2">Grade</th>
                                                                                <th className="px-3 py-2">Dist</th>
                                                                                <th className="px-3 py-2">Rec</th>
                                                                                <th className="px-3 py-2">Rank</th>
                                                                                <th className="px-3 py-2 text-red-400">S1F</th>
                                                                                <th className="px-3 py-2 text-blue-400">G1F</th>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody className="divide-y divide-slate-100 text-center font-bold">
                                                                            {hist.map((v, idx) => (
                                                                                <tr key={idx} className="hover:bg-slate-50">
                                                                                    <td className="px-3 py-2 text-slate-400">{v.date}</td>
                                                                                    <td className="px-3 py-2">{v.grade}</td>
                                                                                    <td className="px-3 py-2">{v.dist}</td>
                                                                                    <td className="px-3 py-2 font-mono text-indigo-600">{v.rec}</td>
                                                                                    <td className="px-3 py-2 bg-slate-50">{v.rank}</td>
                                                                                    <td className="px-3 py-2 text-red-500">{v.s1f}</td>
                                                                                    <td className="px-3 py-2 text-blue-500">{v.g1f}</td>
                                                                                </tr>
                                                                            ))}
                                                                            {hist.length === 0 && (
                                                                                <tr><td colSpan="7" className="py-4 text-slate-300">No historical records available.</td></tr>
                                                                            )}
                                                                        </tbody>
                                                                    </table>
                                                                </div>
                                                            </div>
                                                        )}
                                                    </div>
                                                );
                                            })}
                                        </div>
                                    </div>
                                ) : (
                                    <div className="py-32 text-center bg-white rounded-[3rem] border-2 border-dashed border-slate-200">
                                        <Icon name="Calendar" size={48} className="mx-auto text-slate-200 mb-4"/>
                                        <p className="text-slate-400 font-black text-lg">No Race Data Found</p>
                                        <p className="text-xs text-slate-300 mt-1 uppercase tracking-widest">Please upload data in the ADMIN tab for {selectedDate}</p>
                                    </div>
                                )}
                            </section>
                        )}
                    </main>

                    <footer className="p-8 text-center bg-white border-t border-slate-100">
                        <div className="text-[10px] font-black text-slate-300 uppercase tracking-[0.4em]">
                            Smart Racing Cloud Engine &copy; 2025 Integrated System
                        </div>
                    </footer>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
